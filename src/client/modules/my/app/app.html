<template>
    <div class="app-container">
        
        <!-- NAV -->
        <nav>
            <div class="logo">
                <i class="fa-solid fa-terminal"></i> SR_DEV
            </div>
            <div class="menu">
                <button onclick={handleTab} data-tab="portfolio" class={portfolioClass}>Engineering</button>
                <button onclick={handleTab} data-tab="blog" class={blogClass}>Dev Log</button>
                <button onclick={handleTab} data-tab="about" class={aboutClass}>About Me</button>
            </div>
        </nav>

        <!-- HERO -->
        <header class="hero">
            <div class="status-badge">
                <span class="dot"></span> Closed to Opportunities
            </div>
            <h1>{greeting}, I'm <span class="highlight">Stephen Reitz</span>.</h1>
            <p class="subtitle">Sr. Salesforce Developer | AI Integrator | Cloud Enthusiast</p>
            
            <div class="social-links">
                <!-- UPDATED LINKS -->
                <a href="https://github.com/ssk42" target="_blank">
                    <i class="fa-brands fa-github"></i> GitHub
                </a>
                <a href="https://linkedin.com/in/stephenreitz" target="_blank">
                    <i class="fa-brands fa-linkedin"></i> LinkedIn
                </a>
                <a href="mailto:Stephen.T.Reitz@gmail.com">
                    <i class="fa-solid fa-envelope"></i> Email
                </a>
            </div>
        </header>

        <!-- MAIN CONTENT -->
        <main>
            
            <template if:true={isLoading}>
                <div class="loading">
                    <i class="fa-solid fa-circle-notch fa-spin"></i> Syncing...
                </div>
            </template>

            <template if:false={isLoading}>

                <!-- PORTFOLIO TAB -->
                <template if:true={isPortfolio}>
                    <h2 class="section-header"><i class="fa-solid fa-code"></i> Latest Projects</h2>
                    <div class="grid">
                        <template for:each={projects} for:item="p">
                            <!-- Wrapped Card in Anchor Tag -->
                            <a key={p.id} href={p.url} target="_blank" class="card-link">
                                <ui-card>
                                    <div slot="header">
                                        <span class={p.cssClass}>
                                            <i class={p.icon}></i> {p.lang}
                                        </span>
                                        <span class="stars">
                                            <i class="fa-solid fa-star"></i> {p.stars}
                                        </span>
                                    </div>
                                    <h3>{p.title}</h3>
                                    <p>{p.desc}</p>
                                    <div slot="footer" class="footer-flex">
                                        <span>View Code</span>
                                        <i class="fa-solid fa-arrow-right-long"></i>
                                    </div>
                                </ui-card>
                            </a>
                        </template>
                    </div>
                </template>

                <!-- BLOG TAB -->
                <template if:true={isBlog}>
                    <h2 class="section-header"><i class="fa-solid fa-book-open"></i> The Dev Log</h2>
                    <div class="list-layout">
                        <template for:each={blogs} for:item="post">
                            <a key={post.id} href={post.url} class="card-link">
                                <ui-card>
                                    <div slot="header" class="blog-meta">
                                        <span class="date">{post.date}</span>
                                        <span class="read-time"><i class="fa-regular fa-clock"></i> {post.readTime}</span>
                                    </div>
                                    <h3>{post.title}</h3>
                                    <p>{post.desc}</p>
                                    <div slot="footer">
                                        <span class="read-more">Read Article</span>
                                    </div>
                                </ui-card>
                            </a>
                        </template>
                    </div>
                </template>

                <!-- ABOUT TAB -->
                <template if:true={isAbout}>
                    <div class="grid">
                        <ui-card>
                            <h3 slot="header"><i class="fa-solid fa-person-running"></i> The Runner</h3>
                            <p>Leading hill repeats with the NoMa Run Club. I treat running metrics like server logsâ€”always looking for optimization.</p>
                        </ui-card>
                        <ui-card>
                            <h3 slot="header"><i class="fa-solid fa-dice-d20"></i> The Dungeon Master</h3>
                            <p>Calculating statistical probabilities for D&D. Data governance lessons often apply to DMing: keep your schemas clean.</p>
                        </ui-card>
                    </div>
                </template>

            </template>

        </main>
    </div>
</template>